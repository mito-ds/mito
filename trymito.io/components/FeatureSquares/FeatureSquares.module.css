/*
 * Copyright (c) Saga Inc.
 * Distributed under the terms of the GNU Affero General Public License v3.0 License.
 */

.feature_squares_wrapper {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.feature_squares_heading {
    text-align: center;
    margin-bottom: 1rem;
    font-size: 1.5rem;
    font-weight: 600;
    width: 100%;
}

/* Mobile-first: single column */
.feature_squares_container {
    display: grid;
    grid-template-columns: 1fr;
    gap: 0.75rem;
    width: 100%;
    max-width: 1320px;
}

.feature_card {
    display: flex;
    flex-direction: column;
    background: var(--color-surface);
    border: 1px solid var(--color-text-primary-alpha-15);
    border-radius: 1rem;
    padding: 1rem;
    width: 100%;
    position: relative;
    overflow: hidden;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.feature_card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px var(--shadow-overlay);
}

.feature_card_header {
    margin-bottom: 0.5rem;
}

.feature_card_text_container {
    flex: 1;
    min-width: 0;
    text-align: left;
}

.feature_card_text_container h2 {
    margin: 0 0 0.25rem 0;
    font-size: 1rem;
    font-weight: 600;
}

.feature_card_text_container p {
    margin: 0;
    font-size: 0.85rem;
    line-height: 1.4;
    color: var(--color-text-secondary);
}

.feature_card .link {
    margin-top: 0.5rem;
    font-size: 0.85rem;
}

.feature_card_image_container {
    margin-top: auto;
    padding-top: 0.75rem;
    border-radius: 0.5rem;
    overflow: hidden;
    /* Use aspect-ratio for proper video sizing */
    aspect-ratio: 16 / 9;
    display: flex;
    align-items: center;
    justify-content: center;
}

.feature_card_image_container video,
.feature_card_image_container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    border-radius: 0.5rem;
}

/* Chart wizard: graph with axes + sliders, no outer frame */
.feature_card_chart_wizard .feature_card_image_container {
    display: flex;
    align-items: stretch;
    /* Extend to the bottom-left corner of the card */
    margin-left: -1rem;
    margin-bottom: -1rem;
    padding-left: 0;
    padding-bottom: 0;
    border-radius: 0;
}

.chart_wizard_preview {
    display: flex;
    gap: 0.75rem;
    width: 100%;
    height: 100%;
    min-height: 0;
    position: relative;
    align-items: stretch;
}

.chart_wizard_graph {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: stretch;
    justify-content: center;
    padding: 0;
    position: relative;
}

.chart_wizard_axes {
    position: absolute;
    inset: 0;
    border-left: 1.5px solid var(--color-text-primary-alpha-25);
    border-bottom: 1.5px solid var(--color-text-primary-alpha-25);
    pointer-events: none;
}

.chart_wizard_svg {
    width: 100%;
    height: 100%;
    min-height: 60px;
    position: relative;
    z-index: 1;
}

.chart_wizard_area {
    fill: transparent;
    transition: fill 0.3s ease 0.3s;
}

.chart_wizard_area_active {
    fill: rgba(155, 126, 217, 0.25);
}

.chart_wizard_line {
    stroke: #9a97a0;
    transition: stroke 0.3s ease 0.3s;
}

.chart_wizard_line_active {
    stroke: #9b7ed9;
}

.chart_wizard_sliders {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    padding-top: 1rem;
    gap: 1rem;
    width: 72px;
    flex-shrink: 0;
}

.chart_wizard_slider {
    width: 100%;
}

.chart_wizard_slider_track {
    height: 6px;
    background: #c4c1c8;
    border-radius: 999px;
    position: relative;
    overflow: visible;
    transition: background 0.25s ease 0.35s;
}

.chart_wizard_slider_track_active {
    background: #c9b8f0;
}

.chart_wizard_slider_thumb {
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 14px;
    height: 14px;
    background: #7a7680;
    border-radius: 50%;
    /* Delay synced with cursor animation (starts at 15% of 0.8s = 0.12s) */
    transition: left 0.44s cubic-bezier(0.25, 0.1, 0.25, 1) 0.12s,
                background 0.25s ease 0.35s;
}

.chart_wizard_slider_thumb_active {
    left: calc(100% - 14px);
    background: #7c5cc7;
}

.chart_wizard_cursor {
    position: absolute;
    top: 15%;
    /* Position near the first slider thumb's starting position */
    right: calc(40px);
    transform: translateY(-50%) translateX(-20px);
    color: #4a4554;
    pointer-events: none;
    /* Play once and hold final state */
    animation: chartWizardCursorDrag 0.8s ease-out forwards;
}

.chart_wizard_cursor_icon {
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.15));
}

@keyframes chartWizardCursorDrag {
    0% {
        opacity: 0;
        transform: translateY(-50%) translateX(-20px);
    }
    15% {
        opacity: 1;
        transform: translateY(-50%) translateX(-20px);
    }
    70% {
        opacity: 1;
        transform: translateY(-50%) translateX(38px);
    }
    85% {
        opacity: 1;
        transform: translateY(-50%) translateX(38px);
    }
    100% {
        opacity: 0;
        transform: translateY(-50%) translateX(38px);
    }
}

/* Smart Debugging Preview - Bug Squashing animation */
.feature_card_smart_debugging .feature_card_image_container {
    display: flex;
    align-items: center;
    justify-content: center;
}

.smart_debugging_preview {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    perspective: 1000px;
    padding: 1rem;
}

.smart_debugging_container {
    position: relative;
    width: 100%;
    max-width: 320px;
}

.smart_debugging_error {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    padding: 1.25rem 1.5rem;
    background: #fce8e8;
    border-radius: 0.75rem;
    width: 100%;
}

.smart_debugging_error_text {
    font-family: ui-monospace, 'SF Mono', 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, 'DejaVu Sans Mono', monospace;
    font-size: 0.85rem;
    font-weight: 500;
    color: #e53935;
    line-height: 1.4;
    white-space: nowrap;
}

.smart_debugging_fix {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    padding: 1.25rem 1.5rem;
    background: #e8f5e9;
    border-radius: 0.75rem;
    transform-origin: top center;
    transform: rotateX(-90deg) translateZ(-20px);
    opacity: 0;
    transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1),
                opacity 0.3s ease;
    z-index: 1;
}

.smart_debugging_fix_active {
    transform: rotateX(0deg) translateZ(0px);
    opacity: 1;
}

.smart_debugging_fix_text {
    font-family: ui-monospace, 'SF Mono', 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, 'DejaVu Sans Mono', monospace;
    font-size: 0.85rem;
    font-weight: 500;
    color: #2e7d32;
    line-height: 1.4;
    white-space: nowrap;
}

/* Database Connections Preview */
.feature_card_database_connections .feature_card_image_container {
    display: flex;
    align-items: stretch;
}

.db_connections_preview {
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%;
    min-height: 0;
    position: relative;
    padding: 0.5rem;
    gap: 0;
}

.db_connections_window {
    width: 70%;
    margin: 0 auto;
    background: rgba(30, 28, 35, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    overflow: hidden;
    flex-shrink: 0;
}

.db_connections_window_header {
    padding: 6px 8px;
    background: rgba(40, 38, 48, 0.8);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.db_connections_window_dots {
    display: flex;
    gap: 4px;
}

.db_connections_window_dots span {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
}

.db_connections_window_content {
    padding: 8px 10px;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.db_connections_row {
    display: flex;
    gap: 8px;
    align-items: center;
}

.db_connections_cell_short,
.db_connections_cell_medium,
.db_connections_cell_long {
    height: 4px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 2px;
}

.db_connections_cell_short {
    width: 20%;
}

.db_connections_cell_medium {
    width: 35%;
}

.db_connections_cell_long {
    width: 45%;
}

.db_connections_svg {
    flex: 1;
    width: 100%;
    min-height: 30px;
}

.db_connections_line {
    stroke: rgba(155, 126, 217, 0.3);
    transition: stroke 0.3s ease;
}

.db_connections_line_active {
    stroke: rgba(155, 126, 217, 0.5);
}

/* Animated particles flowing up the paths */
.db_connections_particle {
    fill: #9b7ed9;
    opacity: 0;
    animation: dbParticleFade 1.2s ease-in-out infinite;
}

@keyframes dbParticleFade {
    0% {
        opacity: 0;
        fill: #9b7ed9;
    }
    15% {
        opacity: 1;
        fill: #b8a3e8;
    }
    70% {
        opacity: 1;
        fill: #9b7ed9;
    }
    90% {
        opacity: 0.3;
    }
    100% {
        opacity: 0;
    }
}

.db_connections_nodes {
    position: relative;
    height: 20px;
    width: 100%;
    flex-shrink: 0;
}

.db_connections_node {
    position: absolute;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
}

.db_connections_node_dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: rgba(155, 126, 217, 0.4);
    border: 1.5px solid rgba(155, 126, 217, 0.6);
    transition: all 0.3s ease;
}

.db_connections_node_dot_active {
    background: rgba(155, 126, 217, 0.9);
    border-color: #b8a3e8;
    box-shadow: 0 0 10px rgba(155, 126, 217, 0.8);
    animation: dbNodeEmit 0.8s ease-in-out infinite;
}

@keyframes dbNodeEmit {
    0%, 100% {
        box-shadow: 0 0 8px rgba(155, 126, 217, 0.6);
        transform: scale(1);
    }
    50% {
        box-shadow: 0 0 14px rgba(155, 126, 217, 1);
        transform: scale(1.1);
    }
}

/* Spreadsheet Editor Preview - Vertical Layout */
.feature_card_spreadsheet_editor .feature_card_image_container {
    display: flex;
    align-items: stretch;
}

.spreadsheet_preview {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    gap: 6px;
    padding: 0.5rem;
}

.spreadsheet_container {
    display: flex;
    flex-direction: column;
    width: 100%;
    max-width: 280px;
}

.spreadsheet_formula_bar {
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(40, 38, 48, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-bottom: none;
    border-radius: 6px 6px 0 0;
    padding: 4px 8px;
    min-height: 24px;
    transition: all 0.3s ease;
}

.spreadsheet_formula_bar_active {
    background: rgba(50, 45, 60, 0.9);
    border-color: rgba(155, 126, 217, 0.4);
}

.spreadsheet_formula_label {
    font-size: 0.6rem;
    font-style: italic;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.4);
}

.spreadsheet_formula_text {
    font-family: ui-monospace, 'SF Mono', 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, monospace;
    font-size: 0.65rem;
    color: rgba(255, 255, 255, 0.5);
    transition: color 0.3s ease;
}

.spreadsheet_formula_text_active {
    color: #b8a3e8;
}

.spreadsheet_grid {
    display: flex;
    flex-direction: column;
    background: rgba(30, 28, 35, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 0 0 6px 6px;
    overflow: hidden;
}

.spreadsheet_row_header {
    display: flex;
    background: rgba(50, 48, 58, 0.8);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.spreadsheet_cell_header {
    flex: 1;
    padding: 4px 6px;
    font-size: 0.6rem;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.7);
    text-align: center;
    border-right: 1px solid rgba(255, 255, 255, 0.05);
}

.spreadsheet_cell_header:last-child {
    border-right: none;
}

.spreadsheet_cell_header_highlight {
    background: rgba(155, 126, 217, 0.3);
    color: #fff;
}

.spreadsheet_row {
    display: flex;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.spreadsheet_row:last-child {
    border-bottom: none;
}

.spreadsheet_cell {
    flex: 1;
    padding: 4px 6px;
    font-size: 0.55rem;
    color: rgba(255, 255, 255, 0.6);
    text-align: center;
    border-right: 1px solid rgba(255, 255, 255, 0.05);
    transition: all 0.3s ease;
}

.spreadsheet_cell:last-child {
    border-right: none;
}

.spreadsheet_cell_highlight {
    background: rgba(155, 126, 217, 0.3);
    color: #fff;
    box-shadow: inset 0 0 0 1.5px #9b7ed9;
}

/* Arrow between spreadsheet and code */
.spreadsheet_arrow {
    font-size: 1rem;
    color: rgba(155, 126, 217, 0.3);
    transition: all 0.3s ease;
    line-height: 1;
}

.spreadsheet_arrow_active {
    color: rgba(155, 126, 217, 0.9);
    transform: scale(1.1);
}

/* Python code panel - single line */
.spreadsheet_code {
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(30, 28, 35, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    padding: 8px 12px;
    font-family: ui-monospace, 'SF Mono', 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, monospace;
    font-size: 0.6rem;
    white-space: nowrap;
    transition: all 0.3s ease;
}

.spreadsheet_code_active {
    background: rgba(155, 126, 217, 0.15);
    border-color: rgba(155, 126, 217, 0.5);
    box-shadow: 0 0 12px rgba(155, 126, 217, 0.2);
}

/* Code syntax highlighting */
.code_keyword {
    color: #79c0ff;
}

.code_bracket {
    color: rgba(255, 255, 255, 0.6);
}

.code_string {
    color: #a5d6ff;
}

.code_operator {
    color: #ff7b72;
}

/* Hero card: size video to fit container (no crop), preserve aspect ratio */
.feature_card_hero .feature_card_image_container video {
    object-fit: contain;
}

.feature_squares_container a {
    font-size: inherit;
}

/* Desktop: 3-column bento with proper aspect ratios */
@media (min-width: 50em) {
    .feature_squares_heading {
        margin-bottom: 1.25rem;
        font-size: 1.75rem;
    }

    .feature_squares_container {
        /* 3 columns, hero spans 2 cols Ã— 2 rows */
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(2, 1fr);
        gap: 0.75rem;
    }

    .feature_card_hero {
        grid-column: 1 / 3;
        grid-row: 1 / 3;
    }

    .feature_card {
        padding: 1rem;
        /* Let grid control height via rows */
        min-height: 0;
    }

    /* Hero card: larger video area */
    .feature_card_hero .feature_card_image_container {
        aspect-ratio: 16 / 9;
        flex: 1;
        min-height: 0;
    }

    /* Regular cards: smaller video thumbnail with proper aspect */
    .feature_card_image_container {
        aspect-ratio: 16 / 9;

    }

    .feature_card_text_container h2 {
        font-size: 1rem;
    }

    .feature_card_text_container p {
        font-size: 0.8rem;
        line-height: 1.35;
    }
}

/* Large screens: use more horizontal space */
@media (min-width: 80em) {
}

@media (prefers-reduced-motion: reduce) {
    .feature_card {
        transition: none;
    }
    .feature_card:hover {
        transform: none;
    }
}
